server {
	listen 80 default_server;
	listen [::]:80 default_server ipv6only=on;

	root /vagrant;
	index index.html index.htm;

	server_name localhost;

	location / {
		# simply redirect to django instance
		proxy_pass http://127.0.0.1:8000;
		proxy_intercept_errors off;
		error_page 502 /__local/502.html;
	}

	location /static/ {
	    # static will first try to call to django (debug mode), otherwise
	    # try the /static folder generated by manage.py collectstatic
	    proxy_pass http://127.0.0.1:8000;
	    proxy_intercept_errors on;
	    error_page 502 404 =200 /__local$uri;
	}

	location /__local/static/ {
	    internal;
	    alias /vagrant/static/;
	}

	location /__local/502.html {
	    internal;
	    alias /vagrant/vagrant/502.html;
	}


}
